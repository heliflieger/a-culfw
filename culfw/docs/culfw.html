<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
   <LINK REL="SHORTCUT ICON" HREF="culfw.ico">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Home of the CUL firmware culfw</title>
</head>

<body style="background-color: white">


<h1>culfw</h1>
GPL'd firmware for the <a href="http://shop.busware.de/advanced_search_result.php?keywords=CUL">CUL</a> family of devices.
Current Version: (as of 2009-06-01) is <a
href="http://www.koeniglich.de/culfw/culfw-1.24.tar.gz">1.24</a>

See the <a href="CHANGED">CHANGED</a> file for current changes.

<h2>Description</h2>
<b>culfw</b> is used in conjunction with the CUL and <a
href="/fhem/fhem.html">fhem</a> to automate some common tasks in the household
like switching lamps/shutters/heating/etc. and to log events like
temperature/humidity/power consumption. CUL is a device which is attached
to the PC, making it capable to receive and send 868MHz RF signals. culfw is
the firmware which implements some RF protocols on the CUL, and makes them
useable by <a href="/fhem/fhem.html">fhem</a>, which runs on the PC and
coordinates all the tasks.<br><br> 

<h2>Hardware</h2>
At the heart of the CUL family of devices is the Texas Instruments CC1100 RF IC
and an Atmel CPU. The radio interface is tuned for 868MHz (or 433MHz). You can
easily flash the CUL, actually you should do it, as it ships with a
test-firmware.<br>

Following devices are known:
<ul>
  <li>CUL (CC1101 USB Light)</li>
  <li>CUR (CC1101 USB Remote, prototype)</li>
  <li>DCUN (DUAL CC1101 USB Network, prototype)</li>
</ul>
The culfw firmware supports the CUL and the CUR devices right now.<br>
<br>

<h2>Features</h2>
culfw supports following RF protocols:
<ul>
  <li>FS20: send/receive<br>
      There are numerous FS20 devices, AFAIK. all of them are fully
      supported.</li>
  <li>FHT: send/receive<br>
      Communication to the FHT80b is supported, support for
      talking directly to the valves (FHT8b) is planned.</li>
  <li>S300: receive<br>
      Examples of such devices: S300TH, KS300-2</li>
  <li>EM1000: receive<br>
      Devices: EM1000FM, EM1000GZ, EM1000WZ</li>
  <li>HMS: receive<br>
      Devices: There are numerous HMS devices, AFAIK. all of them are fully
      supported.</li>
  <li>Hoermann: receive<br>
      Some 868 Hoermann garage door openers.</li>
</ul>


<h2>Installation</h2>
<ul>
  <h3>Step 1: flashing the firmware</h3>
  Download the firmware (see the links below) and unpack it.  Change into your
  device directory (e.g. CUL)<br>
  <ul>
    <li>CUL: Insert the USB-Stick while pressing the micro-switch.</li>
    <li>CUR: Remove Battery/USB. Put the device on a table with the jogdial
        facing down. Press the case, until you hear the jogdial is pressed.
        Insert the battery, then the USB-Cable.</li>
  </ul>

  OS specific instructions:
  <ul>
    <li>Linux:<br>
      Install the package dfu-programmer, then execute following commands:<pre>
      dfu-programmer at90usb162 erase
      dfu-programmer at90usb162 flash CUL.hex
      dfu-programmer at90usb162 start</pre>
      The last command will reset the device, a new USB device should appear:
      "03eb:204b Atmel Corp.". If not try to reinsert the CUL without pressing
      the micro-switch.</li>
    <li>Windows:<br>
      See also <a href="http://groups.google.com/group/cul-fans/web/get-cul-running--windows">this</a>
      link for details. Do no install any drivers. Get the Windows Flash tool
      "FLIP" from Atmel, start it, detect the CUL and flash the file CUL.hex to
      it.</li>
  </ul>

  <h3>Step 2: Using the device</h3>
  <ul>
    <li>Linux:<br>
      The device should appear as /dev/ttyACM0 (check /var/log/messages). To
      test it start "screen /dev/ttyACM0", and then type V<return>. The version
      string should appear. To use the device in fhem, define it as a CUL
      instance: "define MyCUL CUL /dev/ttyACM0 1234". See the fhem
      documentation for details.</li>
    <li>Windows:<br>
      Right-click on the tools/MyUSB_USBtoSerial.inf file, and install it.<br>
      Then install a virtual COM port: Locate the COM-port in the device
      manager shown as "USB Virtual Serial Port (COMx)". Start Hyperterminal,
      open a connection to COMx 9600,8,n,1.<br>
      Type "V<return>". The string "V 1.0..." should appear. Type X01<return>
      to enable the data reporting.
      </li>
  </ul>
  Read the README file for more. 
</ul>

<h2>Links:</h2>
<ul>
  Hardware: <a href="http://www.busware.de">http://www.busware.de</a><br>
  culfw (firmware): <a href="http://www.koeniglich.de/culfw/culfw-1.24.tar.gz">
  	http://www.koeniglich.de/culfw/culfw-1.24.tar.gz</a><br>
  FAQ: <a href="http://www.koeniglich.de/culfw/faq.html">
  	http://www.koeniglich.de/culfw/faq.html</a><br>
  README: <a href="http://www.koeniglich.de/culfw/README">
  	http://www.koeniglich.de/culfw/README</a><br>
  Google-Group: <a href="http://groups.google.com/group/cul-fans">
  	http://groups.google.com/group/cul-fans</a><br>
  CVS@berlios: <a href="http://developer.berlios.de/projects/culfw">
  	http://developer.berlios.de/projects/culfw</a><br>
  <br>
</ul>


<h2>License:</h2>
<ul>
  Copyright:<br>
  <ul>
    <li>Rudolf Koenig (r dot koenig at koeniglich dot de)</li>
  </ul>
  License: GPL (v2)<br>
  Thanks to TOSTi for inspiration and numerous other people for help. <br>
</body>

</html>
